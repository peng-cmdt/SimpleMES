生产制造执行系统 (MES) - 核心功能设计需求 (V1.0)

1. 项目总览与目标

为提升生产效率与自动化水平，本项目旨在设计并开发一套生产制造执行系统的核心功能。系统将围绕生产订单为核心，通过精确的工艺流程定义和自动化的工位动作执行，实现对生产过程的精细化管理与控制。

2. 核心模块与功能需求

2.1. 生产订单管理 (Production Order Management)

订单来源多样化： 系统需支持多种订单创建方式。

自动导入： 支持从外部系统（如 ERP）、Excel 文件、EDI (电子数据交换) 接口自动导入生产订单。

手动创建： 提供界面供用户手动录入和创建生产订单。

订单与BOM绑定：

每一个生产订单都必须关联一个明确的物料清单 (BOM)。

导入或创建订单时，系统自动或手动为其附加对应的BOM信息。

订单数据库： 所有生产订单（无论来源）及其关联的BOM信息，都应统一存入系统的订单数据库中，便于追溯与管理。

2.2. 物料清单管理 (BOM Management)

BOM数据库： 建立一个独立的、中央化的BOM数据库，用于存储所有产品的物料清单信息。

版本管理（建议）： BOM应支持版本控制，确保生产订单使用的是正确版本的BOM。

2.3. 生产工艺流程管理 (Production Process Management)

工艺流程定义：

系统需提供一个独立的管理模块（例如，在“Production”主菜单下的“Process”子菜单中）用于创建和维护不同产品的生产工艺流程。

每个产品的生产工艺流程都是一个独立的实体（例如，产品A的工艺流程为 “Process-A”）。

生产步骤 (Step) 设计：

在每个工艺流程（如 “Process-A”）内部，用户可以定义一系列有序的生产步骤（例如，从 S1 到 S10）。

这些步骤共同构成了一个产品的完整制造流程。

工位 (Station) 关联：

每一个生产步骤 (Step) 都必须被指定到一个具体的物理工位 (Station) 上执行（例如，S1 在 Station1 执行）。

2.4. 生产执行与控制 (Production Execution & Control)

动作 (Action) 定义：

在一个生产步骤 (Step) 内部，包含了一系列需要具体执行的原子操作，我们称之为“动作” (Action)。

Action 是最小的执行单元，定义了与设备（如 PLC）的交互细节。

动作类型： 系统至少需要支持以下基础动作类型：

设备数据读取： 例如，A1: 读取工位1的PLC1的D100地址的值。

设备数据写入： 例如，A2: 向工位1的PLC2的D200地址写入值'1'。

（未来可扩展其他动作，如：调用API、等待操作员输入、执行脚本等）。

执行逻辑：

当一个生产订单被启动后，系统严格按照其关联产品（如产品A）的工艺流程 (“Process-A”) 执行。

执行顺序为：按步骤顺序 (S1 -> S2 -> ... -> S10) 执行。

在每个步骤内部，按动作顺序 (A1 -> A2 -> ... -> A5) 执行。

前一个动作执行成功后，才开始下一个动作。当前步骤所有动作完成后，该步骤结束，流程自动进入下一个步骤。

3. 数据模型与关联关系

为实现上述功能，需要设计以下核心数据库表，并建立它们之间的关联：

Processes (工艺流程表): 存储工艺流程信息 (如 Process-A, Process-B)。

Steps (步骤表): 存储所有生产步骤 (如 S1, S2)。

与 Processes 表是 一对多 关系 (一个Process包含多个Step)。

与 Stations 表是 多对一 关系 (一个Step属于一个Station)。

Actions (动作表): 存储所有原子动作 (如 A1, A2)。

与 Steps 表是 一对多 关系 (一个Step包含多个Action)。

需包含动作类型、目标设备（如PLC标识）、地址、读写值等字段。

Stations (工位表): 存储物理工位信息。

Orders (订单表): 存储生产订单信息。

与 Processes 表是 多对一 关系 (一个Order执行一个Process)。

与 BOMs 表是 多对一 关系 (一个Order关联一个BOM)。

BOMs (物料清单表): 存储BOM信息。

4. 后续步骤与协作计划

根据您的提议，我们按以下计划推进：

需求评审与深化： 基于此份需求文档，我们进行1-2次讨论，对细节进行补充和修正，确保团队理解一致。

制定技术实现计划： 在需求确认后，技术团队将基于此文档设计详细的数据库结构、API接口、系统架构和开发排期。

计划确认： 技术实现计划将提交给您进行最终确认。

启动编码： 在获得您的批准后，开发团队正式开始编码工作。

5. 待确认与讨论点 (下一步对话内容)

异常处理： 如果某个Action执行失败（例如，PLC读取超时或写入失败），流程应该如何处理？是暂停、报错并等待人工干预，还是自动重试？

数据追溯： 每个Action执行的结果（如从PLC读取到的值）是否需要记录？生产过程数据如何存储和查询？

用户权限： 谁有权限创建/修改工艺流程？谁可以启动生产订单？

流程灵活性： 是否支持有条件的跳转（例如，S5执行完后，根据结果决定下一步是S6还是S7）？是否支持并行步骤？

UI/UX： 我们需要一个界面来实时监控订单的执行进度吗？它应该展示哪些信息？